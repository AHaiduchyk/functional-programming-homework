# üìà Trend Alert Service

–°–µ—Ä–≤—ñ—Å –¥–ª—è –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –Ω–æ–≤–∏–Ω–Ω–æ–≥–æ —Ö–∞–π–ø—É —Ç–∞ –∑–º—ñ–Ω —Ü—ñ–Ω –Ω–∞ –∞–∫—Ü—ñ—ó –∫–æ–º–ø–∞–Ω—ñ–π. –°—Ç–≤–æ—Ä–µ–Ω–æ –∑ –º–µ—Ç–æ—é –≤–∏—è–≤–ª–µ–Ω–Ω—è –∑–≤‚Äô—è–∑–∫—ñ–≤ –º—ñ–∂ –Ω–æ–≤–∏–Ω–∞–º–∏ —Ç–∞ –¥–∏–Ω–∞–º—ñ–∫–æ—é —Ñ–æ–Ω–¥–æ–≤–æ–≥–æ —Ä–∏–Ω–∫—É ‚Äî —è–∫, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –ø—ñ—Å–ª—è —Ç–≤—ñ—Ç—É –Ü–ª–æ–Ω–∞ –ú–∞—Å–∫–∞.

---

## üöÄ –©–æ –≤–º—ñ—î

- –ó–±—ñ—Ä –ø–æ—Ç–æ—á–Ω–∏—Ö —Ü—ñ–Ω –Ω–∞ –∞–∫—Ü—ñ—ó –∑ Yahoo Finance
- –û—Ç—Ä–∏–º–∞–Ω–Ω—è –Ω–æ–≤–∏–Ω –ø–æ –∫–æ–º–ø–∞–Ω—ñ—ó
- –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è –∑–º—ñ–Ω–∏ —Ç—Ä–µ–Ω–¥—É (up / down / flat)
- –ù–æ—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –ø–æ email –ø—Ä–∏ –∑–º—ñ–Ω—ñ —Ç—Ä–µ–Ω–¥—É
- –ö–∞—Å—Ç–æ–º—ñ–∑–∞—Ü—ñ—è –∞–ª–µ—Ä—Ç—ñ–≤ (—É–º–æ–≤–∏: –≤—Å—ñ, —Ç—ñ–ª—å–∫–∏ –∑—Ä–æ—Å—Ç–∞–Ω–Ω—è, —Ç—ñ–ª—å–∫–∏ –ø–∞–¥—ñ–Ω–Ω—è)
- API –¥–ª—è –≤–∑–∞—î–º–æ–¥—ñ—ó –∑ —Å–∏—Å—Ç–µ–º–æ—é (—Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—è, –ª–æ–≥—ñ–Ω, –∫–∞–º–ø–∞–Ω—ñ—ó, –∞–ª–µ—Ä—Ç–∏)
- –¢–µ—Å—Ç–æ–≤—ñ –¥–∞–Ω—ñ —á–µ—Ä–µ–∑ `/mock_test`

---

## ‚öôÔ∏è –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó

- **Python + Flask** ‚Äì API —Å–µ—Ä–≤–µ—Ä
- **PostgreSQL** ‚Äì –æ—Å–Ω–æ–≤–Ω–∞ –±–∞–∑–∞
- **yfinance** ‚Äì –¥–∞–Ω—ñ –ø—Ä–æ —Ü—ñ–Ω–∏ —Ç–∞ –Ω–æ–≤–∏–Ω–∏
- **smtplib** ‚Äì —Ä–æ–∑—Å–∏–ª–∫–∞ email-–ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
- **Docker-ready**
- **pytest** ‚Äì –¥–ª—è –±–∞–∑–æ–≤–æ–≥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

---

## üì¶ –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

- `app.py` ‚Äî API, –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è, –º–∞—Ä—à—Ä—É—Ç–∏
- `collector.py` ‚Äî –∑–±—ñ—Ä —Ü—ñ–Ω —ñ –Ω–æ–≤–∏–Ω
- `notificator.py` ‚Äî –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–º—ñ–Ω–∏ —Ç—Ä–µ–Ω–¥—É —Ç–∞ —Ä–æ–∑—Å–∏–ª–∫–∞
- `models.py` ‚Äî —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∞–±–ª–∏—Ü—å
- `tests/` ‚Äî –±–∞–∑–æ–≤—ñ —Ç–µ—Å—Ç–∏ REST API

---

## üì¨ –Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î

1. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á —Å—Ç–≤–æ—Ä—é—î –∞–∫–∞—É–Ω—Ç —Ç–∞ –ª–æ–≥—ñ–Ω–∏—Ç—å—Å—è.
2. –°—Ç–≤–æ—Ä—é—î –∫–∞–º–ø–∞–Ω—ñ—é –∑ –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –∫–æ–º–ø–∞–Ω—ñ—ó (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `TSLA`) –∑ –æ–±—Ä–∞–Ω–æ—é —É–º–æ–≤–æ—é (`all`, `up`, `down`).
3. Collector –∫–æ–∂–Ω—ñ 30 —Ö–≤–∏–ª–∏–Ω –∑–±–∏—Ä–∞—î:
   - –ü–æ—Ç–æ—á–Ω—É —Ü—ñ–Ω—É –∞–∫—Ü—ñ–π
   - –ù–æ–≤–∏–Ω–∏, –ø–æ–≤‚Äô—è–∑–∞–Ω—ñ –∑ –∫–æ–º–ø–∞–Ω—ñ—î—é
4. –Ø–∫—â–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –∑–º—ñ–Ω–∞ —Ç—Ä–µ–Ω–¥—É (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –∑ `up` ‚Üí `down`):
   - Notificator –ø–µ—Ä–µ–≤—ñ—Ä—è—î –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ –∞–ª–µ—Ä—Ç–∏
   - –Ø–∫—â–æ —É–º–æ–≤–∞ —Å–ø—ñ–≤–ø–∞–¥–∞—î ‚Äî –Ω–∞–¥—Å–∏–ª–∞—î email –∑ –¥–µ—Ç–∞–ª—è–º–∏
5. –î–ª—è —Ç–µ—Å—Ç—É –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `/mock_test` ‚Äî –≤—Å—Ç–∞–≤–ª—è—î —Ñ–µ–π–∫–æ–≤—É –Ω–æ–≤–∏–Ω—É —ñ —Ç—Ä–µ–Ω–¥

## üõ†Ô∏è –ü—Ä–∏–∫–ª–∞–¥–∏ API

### üîê –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è

```http
POST /register
Content-Type: application/json

{
  "username": "elon",
  "password": "mars123",
  "email": "elon@x.com"
}
```

---

### üîì –õ–æ–≥—ñ–Ω

```http
POST /login
Content-Type: application/json

{
  "username": "elon",
  "password": "mars123"
}
```

---

### üìà –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–∞–º–ø–∞–Ω—ñ—ó

```http
POST /campaigns
Authorization: Basic base64(elon:mars123)
Content-Type: application/json

{
  "company_id": "TSLA",
  "alert_condition": "up"
}
```

---

### üì¨ –¢–µ—Å—Ç–æ–≤–∞ –≤—Å—Ç–∞–≤–∫–∞ (–º–æ–∫-–¥–∞–Ω—ñ)

```http
POST /mock_test
Content-Type: application/json

{
  "company_id": "TSLA",
  "trend": "up",
  "change_percent": 5.5,
  "email": "elon@x.com",
  "news": [
    { "text": "TSLA hits new high!", "url": "https://example.com/tsla" }
  ]
}
```

---

### üì• –û—Ç—Ä–∏–º–∞–Ω–Ω—è –∞–ª–µ—Ä—Ç—ñ–≤

```http
GET /alerts
Authorization: Basic base64(elon:mars123)
```

---

### üîÑ –ó–º—ñ–Ω–∞ —É–º–æ–≤–∏ –∞–ª–µ—Ä—Ç–∞

```http
PATCH /alerts/7
Authorization: Basic base64(elon:mars123)
Content-Type: application/json

{
  "alert_condition": "down"
}
```

---

## üìÑ –¢–∞–±–ª–∏—Ü—ñ –≤ –±–∞–∑—ñ –¥–∞–Ω–∏—Ö

- **users** ‚Äì –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ  
- **campaigns** ‚Äì –∫–∞–º–ø–∞–Ω—ñ—ó –ø–æ –∫–æ–º–ø–∞–Ω—ñ—è—Ö  
- **alerts** ‚Äì –∞–ª–µ—Ä—Ç–∏, –ø—Ä–∏–≤'—è–∑–∞–Ω—ñ –¥–æ —Ç—ñ–∫–µ—Ä–∞—Ö  
- **prices** ‚Äì —ñ—Å—Ç–æ—Ä—ñ—è —Ü—ñ–Ω –∞–∫—Ü—ñ–π  
- **news_data** ‚Äì –Ω–æ–≤–∏–Ω–∏, —â–æ —Å—Ç–æ—Å—É—é—Ç—å—Å—è –∫–æ–º–ø–∞–Ω—ñ–π  
- **notifications** ‚Äì –ª–æ–≥ –Ω–∞–¥—ñ—Å–ª–∞–Ω–∏—Ö –∞–ª–µ—Ä—Ç—ñ–≤  
